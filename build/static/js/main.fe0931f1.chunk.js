(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{36:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a,i,c,r,l,o,s,d,j,u,b,p,h,O,x,m,f,g,v,y,S,_,C,w,A,k,T,P,D,I,E,F,V,N,R,B,z,q,M,U,J,L,Y,G,H,W,X,K,Q,Z,$,ee,te,ne,ae,ie,ce,re,le,oe,se,de=n(1),je=n.n(de),ue=n(26),be=n.n(ue),pe=(n(36),n(4)),he=n(5),Oe=n(6),xe=n(2),me=n(3),fe=me.a.div(a||(a=Object(xe.a)(["\n  position: absolute;\n  max-width: calc(100vw - 300px);\n  width: 100%;\n  left: 200px;\n  top: 58px;\n  padding-left: 50px;\n  padding-right: 50px;\n  padding-bottom: 50px;\n"]))),ge=me.a.button(i||(i=Object(xe.a)(["\n  background-color: #000;\n  color: #fff;\n  border: none;\n  padding: 10px 15px;\n  text-transform: uppercase;\n  font-weight: bold;\n  cursor: pointer;\n  transition: .3s;\n  margin-bottom: 40px;\n  margin-top: 40px;\n\n  &:hover {\n    background: #FF6700;\n  }\n"]))),ve=Object(me.a)(he.b)(c||(c=Object(xe.a)(["\n  display: block;\n  background-color: #000;\n  color: #fff;\n  border: none;\n  padding: 10px 15px;\n  text-transform: uppercase;\n  font-weight: bold;\n  cursor: pointer;\n  transition: .3s;\n  margin-bottom: 10px;\n  margin-top: 10px;\n  margin-left: 10px;\n  text-decoration: none;\n\n  &:hover {\n    background: #FF6700;\n  }\n"]))),ye=Object(me.a)(he.b)(r||(r=Object(xe.a)(["\n  margin: ",";\n  font-weight: bold;\n  color: #FF6700;\n  display: block;\n  transition: .3s;\n  \n  &:hover{\n    color: #000;\n  }\n"])),(function(e){var t=e.margin;return null!==t&&void 0!==t?t:0})),Se=me.a.button(l||(l=Object(xe.a)(["\n      border: none;\n      background-color: transparent;\n      color: #b83c3c;\n      cursor: pointer;\n      margin-left: 10px;\n      \n      &:hover{\n        text-decoration: underline;\n      }\n"]))),_e=me.a.div(o||(o=Object(xe.a)(["\n    display: flex;\n  justify-content: flex-end;\n"]))),Ce=n(0),we=function(){return Object(Ce.jsx)(je.a.Fragment,{children:Object(Ce.jsxs)(fe,{children:[Object(Ce.jsxs)(_e,{children:[Object(Ce.jsx)(ve,{to:"/creation_client",children:"Cr\xe9er un client"}),Object(Ce.jsx)(ve,{to:"/creation_commande",children:"Cr\xe9er une commande"}),Object(Ce.jsx)(ve,{to:"/creation_relance",children:"Cr\xe9er une relance"}),Object(Ce.jsx)(ve,{to:"/creation_relance",children:"Cr\xe9er un magazine"})]}),Object(Ce.jsx)("h1",{children:"Dashboard"})]})})},Ae=me.a.div(s||(s=Object(xe.a)(["\n\n  display: flex;\n  align-items: center;\n  position: relative;\n  width: 80px;\n  height: 80px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n\n  div {\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 64px;\n    height: 64px;\n    margin: 8px;\n    border: 8px solid #f5b9a0;\n    border-radius: 50%;\n    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    border-color: #ff7547 transparent transparent transparent;\n  }\n\n  div:nth-child(1) {\n    animation-delay: -0.45s;\n  }\n\n  div:nth-child(2) {\n    animation-delay: -0.3s;\n  }\n\n  div:nth-child(3) {\n    animation-delay: -0.15s;\n  }\n\n  @keyframes lds-ring {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]))),ke=function(){return Object(Ce.jsxs)(Ae,{children:[Object(Ce.jsx)("div",{children:" "}),Object(Ce.jsx)("div",{children:" "}),Object(Ce.jsx)("div",{children:" "}),Object(Ce.jsx)("div",{children:" "})]})},Te=me.a.table(d||(d=Object(xe.a)(["\n  width: 100%;\n"]))),Pe=function(e){var t=e.clients,n=e.loading,a=e.nameClientSearch,i=e.selectVille,c=e.selectCodePostal,r=e.selectActivite,l=e.getStatus;return console.log(c),n?Object(Ce.jsx)(ke,{}):(console.log(r.value),Object(Ce.jsx)("div",{children:Object(Ce.jsxs)(Te,{children:[Object(Ce.jsx)("thead",{children:Object(Ce.jsx)("tr",{children:["Raison sociale","Activit\xe9","Email","Code Postal","Ville","Acquis/Prospect"].map((function(e,t){return Object(Ce.jsx)("th",{children:e},t)}))})}),Object(Ce.jsx)("tbody",{children:t.filter((function(e){return a?e.raisonSociale.toLowerCase().includes(a):e.raisonSociale&&r.value?e.nafSousClasse.libelle.includes(r.value):e.nafSousClasse.libelle&&c.value?e.adresses[0].ville.codePostal.includes(c.value):e.adresses[0].ville.codePostal&&i.value?e.adresses[0].ville.nom.includes(i.value):e.adresses[0].ville.nom&&l(e)?l(e):""})).map((function(e,t){return Object(Ce.jsxs)("tr",{children:[Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/profile/".concat(e.id)},children:e.raisonSociale})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/profile/".concat(e.id)},children:e.nafSousClasse.libelle})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/profile/".concat(e.id)},children:e.email})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/profile/".concat(e.id)},children:e.adresses[0].ville.codePostal})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/profile/".concat(e.id)},children:e.adresses[0].ville.nom})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/profile/".concat(e.id)},children:e.statut?"Acquis":"Prospect"})})]},t)}))})]})}))},De=me.a.div(j||(j=Object(xe.a)(["\n\tdisplay: ",";\n  \tflex-direction: ",";\n  \tjustify-content: ",";\n  \talign-items: ",";\n  \tflex: ",";\n  \tflex-wrap: ",";\n"])),(function(e){return e.inline?"inline-flex":"flex"}),(function(e){var t=e.direction;return null!==t&&void 0!==t?t:"row"}),(function(e){var t=e.justify;return null!==t&&void 0!==t?t:"flex-start"}),(function(e){var t=e.align;return null!==t&&void 0!==t?t:"baseline"}),(function(e){var t=e.flex;return null!==t&&void 0!==t?t:"initial"}),(function(e){var t=e.wrap;return null!==t&&void 0!==t?t:"nowrap"})),Ie=me.a.input(u||(u=Object(xe.a)(["\n      margin-right: 20px;\n    "]))),Ee=function(e){var t=e.labeltext,n=e.idRadio,a=e.nameRadio,i=e.valueRadio,c=e.checked;return Object(Ce.jsxs)(De,{children:[Object(Ce.jsx)("label",{htmlFor:n,children:t}),Object(Ce.jsx)(Ie,{type:"radio",id:n,name:a,value:i,defaultChecked:c})]})},Fe=me.a.div(b||(b=Object(xe.a)(["\n      margin-bottom: 20px;\n      \n      p{\n        margin-bottom: 10px;\n      }\n    "]))),Ve=function(e){var t=e.data,n=e.name,a=e.selected,i=e.setTypeClientRadio,c=e.label;return Object(Ce.jsxs)(Fe,{children:[Object(Ce.jsx)("p",{children:c}),Object(Ce.jsx)(De,{onChange:function(e){i(e.target.value)},children:t.map((function(e,t){return Object(Ce.jsx)(Ee,{labeltext:e.label,idRadio:e.id,valueRadio:e.value,nameRadio:n,checked:e.value===a},t)}))})]})},Ne=me.a.select(p||(p=Object(xe.a)(["\n      display: block;\n      padding: 10px 20px;\n      margin-top: 10px;\n      margin-right: 10px;\n      margin-bottom: 20px;\n      max-width: 185px;\n    "]))),Re=function(e){var t=e.name,n=e.data,a=e.label,i=e.option,c=e.selectValue,r=e.setSelectValue,l=e.optionValue,o=e.disabled,s=document.querySelectorAll(".inputSelect");return Object(de.useEffect)((function(){for(var e=0;e<s.length;e++)s[e].selectedIndex=0}),[o]),Object(Ce.jsxs)("label",{children:[a,Object(Ce.jsxs)(Ne,{name:t,id:c,onChange:function(e){return function(e){e.preventDefault();var t=e.target.selectedIndex,n=e.target.childNodes[t];r({value:e.target.value,valueDisplay:n.text})}(e)},disabled:o,className:"inputSelect",children:[Object(Ce.jsx)("option",{value:l,children:i}),n?n.map((function(e,t){return Object(Ce.jsx)("option",{value:e.value,children:e.valueDisplay},t)})):""]})]})},Be=me.a.div(h||(h=Object(xe.a)(["\n  position: relative;\n"]))),ze=me.a.ul(O||(O=Object(xe.a)(["\n    border: 1px solid #999;\n    list-style: none;\n    margin-top: 0;\n    max-height: 143px;\n    overflow-y: auto;\n    padding: 0;\n    width: calc(300px + 1rem);\n    position: absolute;\n    background-color: #fff;\n    box-shadow: 0px 4px 39px -11px rgba(0, 0, 0, 0.17);\n    \n    li {\n    padding: 0.5rem;\n    \n        &.suggestion-active, &:hover {\n          background-color: #ffd4b3;\n          color: #000;\n          cursor: pointer;\n          font-weight: 700;\n        }\n    }\n"]))),qe=me.a.input(x||(x=Object(xe.a)(["\n    display: block;\n    margin-bottom: 20px;\n    margin-top: 10px;\n    margin-right: 10px;\n    padding: 10px 20px;\n"]))),Me=me.a.div(m||(m=Object(xe.a)(["\n    color: #999;\n    padding: 0.5rem;\n    position: absolute;\n    border: 1px solid black;\n    box-shadow: 0 4px 39px -11px rgba(0,0,0,0.17);\n    background-color: #fff;\n"]))),Ue=function(e){var t=e.label,n=e.resultFetch,a=e.input,i=e.setInput,c=e.showSuggestions,r=e.setShowSuggestions,l=e.filteredSuggestions,o=e.setFilteredSuggestions,s=e.activeSuggestionIndex,d=e.setActiveSuggestionIndex,j=e.property,u=[],b=function(e){o([]),i(e.target.innerText),d(0),r(!1)},p=function(){return l.length?Object(Ce.jsxs)(ze,{children:[l.map((function(e,t){var n;return t===s&&(n="suggestion-active"),Object(Ce.jsx)("li",{className:n,onClick:b,children:e},e)})),";"]}):Object(Ce.jsx)(Me,{children:Object(Ce.jsx)("em",{children:"Aucune suggestion trouv\xe9e."})})};return Object(Ce.jsxs)(Be,{children:[Object(Ce.jsxs)("label",{htmlFor:"search-client",children:[t,Object(Ce.jsx)(qe,{name:"search-client",type:"text",onChange:function(e){var t=e.target.value;n.forEach((function(e){return u.push(e[j].toLowerCase())}));var a=u.filter((function(e,t,n){return t===n.indexOf(e)})).filter((function(e){return e.toString().toLowerCase().indexOf(t.toLowerCase())>-1}));i(e.target.value),o(a),d(0),r(!0)},onKeyDown:function(e){40===e.keyCode&&s<l.length-1?(d(s+1),i(document.getElementsByClassName("suggestion-active")[0].innerText)):38===e.keyCode&&s>0?(d(s-1),i(document.getElementsByClassName("suggestion-active")[0].innerText)):13===e.keyCode&&(e.preventDefault(),i(document.getElementsByClassName("suggestion-active")[0].innerText),r(!1))},value:a,autoComplete:"off"})]}),c&&a&&Object(Ce.jsx)(p,{})]})},Je=me.a.div(f||(f=Object(xe.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]))),Le=function(e){var t=e.resultFetch,n=e.typeClientRadio,a=e.input,i=e.setInput,c=e.showSuggestions,r=e.setShowSuggestions,l=e.activeSuggestionIndex,o=e.setActiveSuggestionIndex,s=e.filteredSuggestions,d=e.setFilteredSuggestions,j=e.selectVille,u=e.setSelectVille,b=e.selectActivite,p=e.setSelectActivite,h=e.selectCodePostal,O=e.setSelectCodePostal,x=e.setTypeClientRadio,m=e.property,f=[];t.map((function(e){return e.adresses.map((function(e){return e.ville}))})).map((function(e){return e.map((function(e){return f.push(e.nom)}))}));var g=f.filter((function(e,t,n){return n.indexOf(e)===t})),v=[];t.map((function(e){return e.adresses.map((function(e){return e.ville}))})).map((function(e){return e.map((function(e){return v.push(e.codePostal)}))}));var y=v.filter((function(e,t,n){return n.indexOf(e)===t})),S=[];t.map((function(e){return e.nafSousClasse})).map((function(e){return S.push(e.libelle)})),console.log(S);var _=S.filter((function(e,t,n){return n.indexOf(e)===t}));return Object(Ce.jsxs)(Je,{children:[Object(Ce.jsxs)(De,{children:[Object(Ce.jsx)(Ue,{label:"Recherche par client",resultFetch:t,showSuggestions:c,setShowSuggestions:r,input:a,setInput:i,activeSuggestionIndex:l,setActiveSuggestionIndex:o,filteredSuggestions:s,setFilteredSuggestions:d,property:m}),Object(Ce.jsx)(Re,{label:"Activit\xe9s",data:_.map((function(e,t){return{id:t,value:e,valueDisplay:e}})),option:"Filter par activit\xe9",optionValue:"",selectValue:b,setSelectValue:p}),Object(Ce.jsx)(Re,{label:"Ville",data:g.map((function(e,t){return{id:t,value:e,valueDisplay:e}})),option:"Filter par ville",optionValue:"",seleValue:j,setSelectValue:u}),Object(Ce.jsx)(Re,{label:"Code postal",data:y.map((function(e,t){return{id:t,value:e,valueDisplay:e}})),option:"Filter par code postal",optionValue:"",seleValue:h,setSelectValue:O})]}),Object(Ce.jsx)(De,{children:Object(Ce.jsx)(Ve,{label:"Status du client",setTypeClientRadio:x,selected:n,name:"isHasAddressDelivery",data:[{id:"id1",label:"Acquis",value:"Acquis"},{id:"id2",label:"Prospect",value:"Prospect"},{id:"id3",label:"Les deux",value:""}]})})]})},Ye=me.a.div(g||(g=Object(xe.a)(["\n  margin-left: auto;\n  margin-right: auto;\n  width: max-content;\n  margin-top: 30px;\n\n   p {\n    color: black;\n    float: left;\n    padding: 8px 16px;\n    text-decoration: none;\n  }\n"]))),Ge=function(){return Object(Ce.jsxs)(Ye,{className:"pagination",children:[Object(Ce.jsx)("p",{children:"\xab"}),Object(Ce.jsx)("p",{children:"1"}),Object(Ce.jsx)("p",{children:"2"}),Object(Ce.jsx)("p",{children:"3"}),Object(Ce.jsx)("p",{children:"4"}),Object(Ce.jsx)("p",{children:"5"}),Object(Ce.jsx)("p",{children:"6"}),Object(Ce.jsx)("p",{children:"\xbb"})]})},He=n(11),We=n.n(He),Xe=n(14),Ke=function(e){var t=Object(de.useState)(!1),n=Object(pe.a)(t,2),a=n[0],i=n[1],c=Object(de.useState)([]),r=Object(pe.a)(c,2),l=r[0],o=r[1];return{items:l,load:Object(de.useCallback)(Object(Xe.a)(We.a.mark((function t(){var n,a;return We.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,fetch(e,{headers:{Accept:"application/ld+json",Authorization:"Bearer "+localStorage.getItem("token")}});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,n.ok?(console.log("ok"),a.hasOwnProperty("hydra:member")?o(a["hydra:member"]):o(a),i(!1)):401===n.status&&(i(!0),console.log("401"),fetch("http://localhost:8000/api/token/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:localStorage.getItem("refreshToken")})}).then((function(t){t.ok?(console.log("ok"),t.json().then((function(t){console.log(t),localStorage.setItem("token",t.token),localStorage.setItem("refreshToken",t.refreshToken),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){e.ok?(console.log("ok"),e.json().then((function(e){e.hasOwnProperty("hydra:member")?o(e["hydra:member"]):o(e)})),i(!1)):401===e.status&&console.log("401")}))}))):console.log("401")})));case 8:case"end":return t.stop()}}),t)}))),[e]),loading:a}},Qe=function(){var e=Ke("http://localhost:8000/api/clients"),t=e.items,n=e.loading,a=e.load;Object(de.useEffect)((function(){a()}),[a]);var i=Object(de.useState)([]),c=Object(pe.a)(i,2),r=c[0],l=c[1];Object(de.useEffect)((function(){l(t)}),[t]);var o=Object(de.useState)(""),s=Object(pe.a)(o,2),d=s[0],j=s[1],u=Object(de.useState)(""),b=Object(pe.a)(u,2),p=b[0],h=b[1],O=Object(de.useState)(""),x=Object(pe.a)(O,2),m=x[0],f=x[1],g=Object(de.useState)(""),v=Object(pe.a)(g,2),y=v[0],S=v[1],_=Object(de.useState)([]),C=Object(pe.a)(_,2),w=C[0],A=C[1],k=Object(de.useState)(0),T=Object(pe.a)(k,2),P=T[0],D=T[1],I=Object(de.useState)(!1),E=Object(pe.a)(I,2),F=E[0],V=E[1],N=Object(de.useState)(""),R=Object(pe.a)(N,2),B=R[0],z=R[1];return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(fe,{children:[Object(Ce.jsx)(Le,{resultFetch:r,setResultFetch:l,typeClientRadio:d,showSuggestions:F,setShowSuggestions:V,input:B,setInput:z,filteredSuggestions:w,setFilteredSuggestions:A,activeSuggestionIndex:P,setActiveSuggestionIndex:D,selectActivite:p,setSelectActivite:h,selectVille:m,setSelectVille:f,selectCodePostal:y,setSelectCodePostal:S,setTypeClientRadio:j,property:"raisonSociale"}),Object(Ce.jsx)(_e,{children:Object(Ce.jsx)(ve,{to:"/creation_client",children:"Cr\xe9er un client"})}),Object(Ce.jsx)("h1",{children:"Clients page"}),Object(Ce.jsx)(Pe,{clients:r,loading:n,nameClientSearch:B,selectVille:m,selectCodePostal:y,selectActivite:p,getStatus:function(e){return"Acquis"===d?!0===e.statut:"Prospect"===d?!0!==e.statut:e},setArrayClient:l}),Object(Ce.jsx)(Ge,{})]})})},Ze=me.a.div(v||(v=Object(xe.a)(["\nmargin-top: 20px;\nborder: 2px solid #FF6700;\npadding-left: 20px;\n"]))),$e=function(){return Object(Ce.jsxs)(Ze,{children:[Object(Ce.jsx)("h2",{children:"Relance"}),Object(Ce.jsxs)("ul",{children:[Object(Ce.jsx)("li",{children:"Relance n\xb01"}),Object(Ce.jsx)("li",{children:"Relance n\xb02"})]})]})},et=me.a.button(y||(y=Object(xe.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 1rem 1rem;\n  border: none;\n  background-color: white;\n  cursor: pointer;\n\n  &:after {\n    content: url(",");\n    margin-left: 10px;\n"])),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJASURBVHgBvZYxT9tAFMffnU2iSEiNIEhdQK7UsZXo1KkqjEyBrVuTlA4MHbpXajvwBWAEEvgEkIkREBMTGfgAlliQIGAkJGRj5/Ge41ghJhc7mPyky9n3zvfXu7x39wTE4KFWmKOuiAjcG9TygckSAhrUc6uPla8OB60lVEZna6pEM/4CoAExQBAmLfgvU7ncSSR4X3traOju0uMsDAELt2xtPrdyYfbaZERsa7JEYqfDijGCdkTLuqf25uRi1NYFTxBS7EKatLCUWW7uRASDbWTP8pAulmfrnzrbG26pht7BK4gxedrecNd8QT8aY0YiIyY+gnz/DRIw61SnvoeC7dCPj/Zljdo6iPHp2N8gpYsv2E7q+N75ZN5AUjhy7zcKc+xhEUaErkORBYfOt6Tw0SjpZ2SChCGcagH7WeXMAsjPq5HxTrDg3flTg3ML3vEvwOuzfkuCDirGZ5SRGLXR+8QHAIUge3gDioR/TlBbqPvj7j7FW4+XEa+fYul0tpmoCBzlAmQbINBLQ1KCHMKI4Mtaui7UYVQg7MncTy4L0IRXBkljrHJ1pAdv/2lra3E/9k7+UARPJ/r/RHCWhvchReuLbnkV7F220nzHz+F96Al3iToL0sdq2d585yUUzJUt00PxG1IGW1jOrVhmRNAX/XG5TRPS8tTieia73NzrHuxTJuapvtGo5BAGDEfDs92lbs+Ugh0cKhnb1UA8YQ6OdiHcTFYI9/JQLXylmYvBVcYtLPWpmYJPK0pqzrNBaz0CI9zQYVGs9mYAAAAASUVORK5CYII="),tt=function(e){var t=e.text,n=e.add;return Object(Ce.jsx)(et,{onClick:function(e){e.preventDefault(),n(e)},children:t})},nt=me.a.input(S||(S=Object(xe.a)(["\n      display: block;\n      margin-bottom: 20px;\n      margin-top: 10px;\n      margin-right: 10px;\n      padding: 10px 20px;\n    "]))),at=function(e){var t=e.label,n=e.onChange,a=e.value,i=e.name,c=e.type;return Object(Ce.jsxs)("label",{children:[t,Object(Ce.jsx)(nt,{type:c,onChange:n,value:a,name:i})]})},it=me.a.div(_||(_=Object(xe.a)(["\n  max-width: 200px;\n  \n  p{\n    font-size: 18px;\n    margin-top: 5px;\n    font-weight: 400;\n  }\n  \n  .title{\n    font-size: 14px;\n    font-weight: 700;\n  }\n"]))),ct=me.a.p(C||(C=Object(xe.a)(["\n  display: block;\n  padding: 10px;\n  border-radius: 4px;\n  background-color: #dedede;\n  margin-right: 10px;\n  margin-top: 5px;\n"]))),rt=function(e){var t=e.titre,n=e.information,a=e.tags;return Object(Ce.jsxs)(it,{children:[Object(Ce.jsx)("p",{className:"title",children:t}),n&&Object(Ce.jsx)("p",{children:n}),a&&Object(Ce.jsx)(De,{children:a.map((function(e){return Object(Ce.jsx)(ct,{children:e},e)}))})]})},lt=me.a.div(w||(w=Object(xe.a)(["\n  width: 200px;\n  padding: 20px;\n  background-color: lightgrey;\n  font-size: 18px;\n  h3{\n    margin: 0 ;\n  }\n"]))),ot=me.a.p(A||(A=Object(xe.a)(["\n    text-transform: uppercase;\n    font-weight: 700;\n    font-size: 14px;\n  margin: 10px 0 5px 0 ;\n"]))),st=function(e){var t=e.contact;return Object(Ce.jsxs)(lt,{children:[Object(Ce.jsxs)("h3",{children:[t.nom," ",Object(Ce.jsx)("span",{children:t.prenom})]}),Object(Ce.jsx)(ot,{children:"Fonction"}),Object(Ce.jsx)("p",{children:t.fonction}),Object(Ce.jsx)(ot,{children:"T\xe9l\xe9phone"}),Object(Ce.jsx)("p",{children:t.tel}),Object(Ce.jsx)(ot,{children:"Email"}),Object(Ce.jsx)("p",{children:t.email})]})},dt=me.a.div(k||(k=Object(xe.a)(["\n    display: flex;\n    margin-bottom: 50px;\n}\n"]))),jt=me.a.div(T||(T=Object(xe.a)(["\ndisplay : flex;\nflex-direction: column;\nalign-items: center;\nmargin: 0 30px;\n"]))),ut=me.a.p(P||(P=Object(xe.a)(["\n\n"]))),bt=me.a.div(D||(D=Object(xe.a)(["\nwidth: 20px;\nheight: 20px;\nborder-radius: 50%;\nbackground-color: lightgrey;\nmargin: 30px 0;\n"]))),pt=me.a.p(I||(I=Object(xe.a)(["\n\n"]))),ht=function(){return Object(Ce.jsxs)(dt,{children:[Object(Ce.jsxs)(jt,{children:[Object(Ce.jsx)(ut,{children:"230\u20ac"}),Object(Ce.jsx)(bt,{}),Object(Ce.jsx)(pt,{children:"02/2021"})]}),Object(Ce.jsxs)(jt,{children:[Object(Ce.jsx)(ut,{children:"230\u20ac"}),Object(Ce.jsx)(bt,{}),Object(Ce.jsx)(pt,{children:"02/2021"})]}),Object(Ce.jsxs)(jt,{children:[Object(Ce.jsx)(ut,{children:"230\u20ac"}),Object(Ce.jsx)(bt,{}),Object(Ce.jsx)(pt,{children:"02/2021"})]}),Object(Ce.jsxs)(jt,{children:[Object(Ce.jsx)(ut,{children:"230\u20ac"}),Object(Ce.jsx)(bt,{}),Object(Ce.jsx)(pt,{children:"02/2021"})]}),Object(Ce.jsxs)(jt,{children:[Object(Ce.jsx)(ut,{children:"230\u20ac"}),Object(Ce.jsx)(bt,{}),Object(Ce.jsx)(pt,{children:"02/2021"})]})]})},Ot=me.a.div(E||(E=Object(xe.a)(["\n  border: 1px solid black;\n  margin-bottom: 50px;\n"]))),xt=me.a.div(F||(F=Object(xe.a)(["\ndisplay : flex;\njustify-content: space-between;\npadding: 10px; 20px;\n"]))),mt=me.a.div(V||(V=Object(xe.a)(["\ndisplay : flex;\nborder-top: 1px solid black;\npadding: 20px;\n"]))),ft=function(e){var t=e.dataHistorique,n=Ke("http://127.0.0.1:8000/api/historique_clients/".concat(t.id)),a=n.items,i=n.load,c=n.loading;return Object(de.useEffect)((function(){i()}),[i]),c?Object(Ce.jsx)(ke,{}):Object(Ce.jsxs)(Ot,{children:[Object(Ce.jsxs)(xt,{children:[Object(Ce.jsxs)("p",{children:["Date : ",Object(Ce.jsx)("span",{children:a.createdAt})]}),Object(Ce.jsxs)("p",{children:["Contact : ",Object(Ce.jsx)("span",{children:a.nom+" "+a.prenom})," ",Object(Ce.jsx)("span",{children:"(Physique)"})]}),Object(Ce.jsxs)("p",{children:["Projet : ",Object(Ce.jsx)("span",{children:"Projet n\xb0"})]})]}),Object(Ce.jsx)(mt,{children:Object(Ce.jsx)("p",{children:a.commentaire})})]})},gt=me.a.div(N||(N=Object(xe.a)(["\n  margin-bottom: 30px;\n\n  span {\n    font-weight: 300;\n  } \n  \n  a {\n    font-weight: 500;\n    font-size: 22px;\n    color: #000;\n      &:hover{\n        text-decoration: underline;\n      } \n  }\n"]))),vt=me.a.div(R||(R=Object(xe.a)(["\nwidth: 100%;\n"]))),yt=me.a.div(B||(B=Object(xe.a)(["\nwidth: 100%;\ndisplay : flex;\njustify-content: space-between;\n"]))),St=me.a.div(z||(z=Object(xe.a)(["\ndisplay: flex;\n"]))),_t=me.a.div(q||(q=Object(xe.a)(["\ndisplay: flex;\nflex-direction: column\n"]))),Ct=me.a.div(M||(M=Object(xe.a)(["\n\n"]))),wt=me.a.div(U||(U=Object(xe.a)(["\n  display : grid; \n  grid-template-columns: repeat(auto-fill, 45%);\n  gap: 10px;\n"]))),At=me.a.div(J||(J=Object(xe.a)(["\n  display: grid; \n  grid-template-columns: repeat(auto-fill, 250px);\n  gap: 10px;\n"]))),kt=me.a.div(L||(L=Object(xe.a)(["\n  width : 55%;\n"]))),Tt=me.a.div(Y||(Y=Object(xe.a)(["\n display: flex;\n flex-direction: column;\n"]))),Pt=me.a.table(G||(G=Object(xe.a)(["\n      width: 60%;\n    "]))),Dt=me.a.td(H||(H=Object(xe.a)(["\n  width: 1px;\n  white-space: nowrap;\n"]))),It=function(e){var t=e.headTable,n=e.dataPotentiality,a=e.removePotentiality;return Object(Ce.jsx)("div",{children:Object(Ce.jsxs)(Pt,{children:[Object(Ce.jsx)("thead",{children:Object(Ce.jsx)("tr",{children:t.map((function(e,t){return Object(Ce.jsx)("th",{children:e},t)}))})}),Object(Ce.jsx)("tbody",{children:n&&n.length>0?n.map((function(e,t){return Object(Ce.jsxs)("tr",{id:t,children:[Object(Ce.jsx)(Dt,{children:e?e.type.valueDisplay:""}),Object(Ce.jsx)(Dt,{children:e?e.magazine.valueDisplay:""}),a&&Object(Ce.jsx)(Dt,{children:Object(Ce.jsx)(Se,{onClick:function(e){return a(e,t)},children:"Supprimer X"})})]},t+e.type.value)})):""})]})})},Et=me.a.div(W||(W=Object(xe.a)(["\ndisplay : flex;\njustify-content: flex-end;\nfont-weight: 900;\n"]))),Ft=me.a.table(X||(X=Object(xe.a)(["\n      width: 100%;\n    "]))),Vt=function(e){return Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)(Ft,{children:[Object(Ce.jsx)("thead",{children:Object(Ce.jsx)("tr",{children:["Type","Magasine","Prix","Status",""].map((function(e,t){return Object(Ce.jsx)("th",{children:e},t)}))})}),Object(Ce.jsx)("tbody",{children:e.commandes.map((function(e,t){return Object(Ce.jsxs)("tr",{children:[Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:"Type de produit"})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:e.fin})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:"Champ manquant"})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:e.facturation})})]},t)}))})]}),Object(Ce.jsx)(Et,{children:"Total de CA : 1854\u20ac"})]})},Nt=me.a.button(K||(K=Object(xe.a)(["\n  background-color: transparent;\n  color: black;\n  padding: 10px 20px;\n  font-size: 20px;\n  font-weight: 300;\n  border: transparent;\n  transition: .3s;\n  cursor: pointer;\n  border-bottom: 3px solid transparent;\n  margin-bottom: 30px;\n\n  &:hover {\n    color: #FF6700;\n  }\n\n  ","\n"])),(function(e){return e.active&&"\n          color:#FF6700;\n    border-bottom: 3px solid #FF6700;\n    opacity: 1;\n  "})),Rt=["contact","commandes","historiques","chiffres d'affaires"],Bt=function(){var e=Object(Oe.f)().id,t=Object(de.useState)(Rt[0]),n=Object(pe.a)(t,2),a=n[0],i=n[1],c=Ke("http://127.0.0.1:8000/api/clients/".concat(e)),r=c.items,l=c.load,o=c.loading;return Object(de.useEffect)((function(){l()}),[l]),console.log(r),o?Object(Ce.jsx)(ke,{}):Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(fe,{children:[Object(Ce.jsx)($e,{}),Object(Ce.jsxs)(_e,{children:[Object(Ce.jsx)(ve,{to:"/creation_client",children:"Modifier le profil"}),Object(Ce.jsx)(ve,{to:"/creation_commande",children:"Nouvelle commande"}),Object(Ce.jsx)(ve,{to:"/creation_client",children:"Nouvelle relance"})]}),Object(Ce.jsx)(gt,{children:Object(Ce.jsxs)("h1",{children:[r.raisonSociale," / ",r.nafSousClasse?r.nafSousClasse.libelle:"loading"]})}),Object(Ce.jsx)("div",{children:Rt.map((function(e){return Object(Ce.jsx)(Nt,{active:a===e,onClick:function(t){t.preventDefault(),i(e)},children:e},e)}))}),"contact"===a&&Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)(kt,{children:[Object(Ce.jsx)("h2",{children:"Coordonn\xe9es"}),Object(Ce.jsxs)(wt,{children:[Object(Ce.jsx)(rt,{titre:"T\xe9l\xe9phone",information:""}),Object(Ce.jsx)(rt,{titre:"Email",information:r.email}),Object(Ce.jsx)(rt,{titre:"Adresse",information:"25 rue du cefim 370000 Tours"}),Object(Ce.jsx)(rt,{titre:"Site internet",information:r.siteInternet})]}),Object(Ce.jsx)("h2",{children:"Indice de potentialit\xe9"}),Object(Ce.jsx)(It,{headTable:["","",""]})]}),Object(Ce.jsxs)(Tt,{children:[Object(Ce.jsx)("h2",{children:"Contact"}),Object(Ce.jsx)(At,{children:r.contacts&&r.contacts.length>0?r.contacts.map((function(e,t){return Object(Ce.jsx)(st,{contact:e},t)})):"Loading..."})]})]})||"commandes"===a&&Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)("h2",{children:"Commandes"}),Object(Ce.jsx)(Vt,{commandes:r.commandes})]})||"historiques"===a&&Object(Ce.jsx)(De,{children:Object(Ce.jsxs)(vt,{children:[Object(Ce.jsxs)(yt,{children:[Object(Ce.jsx)("h2",{children:"Historique de contact"}),Object(Ce.jsx)(tt,{text:"Cr\xe9er un historique"})]}),Object(Ce.jsx)(Ct,{children:r.historiqueClients&&r.historiqueClients.length>0?r.historiqueClients.map((function(e,t){return Object(Ce.jsx)(ft,{dataHistorique:e},t)})):"Loading..."})]})})||"chiffres d'affaires"===a&&Object(Ce.jsx)(De,{children:Object(Ce.jsxs)(kt,{children:[Object(Ce.jsx)("h2",{children:"Chiffres d'affaires"}),Object(Ce.jsxs)(St,{children:[Object(Ce.jsx)(at,{label:"DE :",type:"date"}),Object(Ce.jsx)(at,{label:"A :",type:"date"})]}),Object(Ce.jsxs)(_t,{children:[Object(Ce.jsx)(ht,{}),Object(Ce.jsx)(ht,{})]})]})})]})})},zt=n(20),qt=n(12),Mt=me.a.input(Q||(Q=Object(xe.a)(["\n      display: block;\n      margin-bottom: 20px;\n      margin-top: 10px;\n      margin-right: 10px;\n      padding: 10px 20px;\n    "]))),Ut=me.a.li(Z||(Z=Object(xe.a)(["\n      list-style: none;\n      margin-left: 0;\n      padding-left: 0;\n"]))),Jt=me.a.span($||($=Object(xe.a)(["\n      font-weight: bold;\n      margin-bottom: 5px;\n      margin-top: 10px;\n      display: block;\n"]))),Lt=function(e){var t=e.firstname,n=e.lastname,a=e.job,i=e.phone,c=e.mail,r=e.onChange,l=e.numberContact,o=e.removeContact,s=Object(de.useState)(t),d=Object(pe.a)(s,2),j=d[0],u=d[1],b=Object(de.useState)(n),p=Object(pe.a)(b,2),h=p[0],O=p[1],x=Object(de.useState)(a),m=Object(pe.a)(x,2),f=m[0],g=m[1],v=Object(de.useState)(c),y=Object(pe.a)(v,2),S=y[0],_=y[1],C=Object(de.useState)(i),w=Object(pe.a)(C,2),A=w[0],k=w[1];return Object(de.useEffect)((function(){r({nom:h,prenom:j,fonction:f,tel:A,email:S})}),[j,h,f,A,S,r]),Object(Ce.jsxs)(Ut,{id:l,children:[Object(Ce.jsxs)(De,{"align-items":"baseline",children:[Object(Ce.jsxs)(Jt,{children:["Contact n\xb0 ",l+1]}),Object(Ce.jsx)(Se,{onClick:o,children:"Supprimer X"})]}),Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["Nom",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){O(e.target.value)},value:h,name:"client_contact_lastname",required:!0})]}),Object(Ce.jsxs)("label",{children:["Pr\xe9nom",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){u(e.target.value)},value:j,name:"client_contact_firstname",required:!0})]}),Object(Ce.jsxs)("label",{children:["Fonction",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){g(e.target.value)},value:f,name:"client_contact_job",required:!0})]})]}),Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["T\xe9l\xe9phone",Object(Ce.jsx)(Mt,{type:"tel",onChange:function(e){k(e.target.value)},value:A,name:"client_contact_phone",pattern:"[0-9]{10}",required:!0})]}),Object(Ce.jsxs)("label",{children:["Mail",Object(Ce.jsx)(Mt,{type:"email",onChange:function(e){_(e.target.value)},value:S,name:"client_contact_mail",required:!0})]})]})]})},Yt=n(13),Gt=function(e,t){var n=e.target.value,a=e.target.name;t(Object(Yt.a)({},a,n))},Ht=me.a.label(ee||(ee=Object(xe.a)(["\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 20px;\n  & textarea{\n    margin-top: 10px;\n  }\n"]))),Wt=function(e){var t=e.label,n=e.commentaireId,a=e.name,i=e.commentaireRows,c=e.commentaireCols,r=e.onChange;return Object(Ce.jsxs)(Ht,{children:[t,Object(Ce.jsx)("textarea",{id:n,name:a,rows:i,cols:c,onChange:r})]})},Xt=(n(49),me.a.div(te||(te=Object(xe.a)(["\n  padding: 20px 25px;\n  position: fixed;\n  top: 59px;\n  right: 0;\n  transform: translateX(100%);\n  min-width: 400px;\n  z-index: 9999;\n  animation: 6s ease alternate showMessage;\n  opacity: 0;\n  background-color: #b0f5d4;\n  \n  @keyframes showMessage {\n    15% {\n      opacity: 1;\n      transform: translateX(0);\n    }\n    80% {\n      opacity: .8;\n      transform: translateX(0);\n    }\n    100% {\n      opacity: 0;\n    }\n  }\n\n  p {\n    font-size: 16px\n  }\n"])))),Kt=me.a.p(ne||(ne=Object(xe.a)(["\n  margin-bottom: 10px;\n  font-weight: bold;\n"]))),Qt=me.a.p(ae||(ae=Object(xe.a)(["\n  margin-bottom: 10px;\n"]))),Zt=function(e){var t=e.messageTitle,n=e.messageText;e.statut;return Object(Ce.jsxs)(Xt,{children:[Object(Ce.jsx)(Kt,{children:t}),Object(Ce.jsx)(Qt,{children:n})]})},$t=me.a.ul(ie||(ie=Object(xe.a)(["\n      margin-left: 0;\n      padding-left: 0;\n"]))),en=me.a.div(ce||(ce=Object(xe.a)(["\n        margin-top: 30px;\n  display: flex;\n  justify-content: space-between;\n  \n  & div:last-child{\n    width: 75%;\n  }\n"]))),tn=function(){var e=Object(de.useReducer)((function(e,t){return Object(qt.a)(Object(qt.a)({},e),t)}),{client_name:"",client_ape:"",client_activite:"",client_phone:"",client_mail:"",client_street_number:"",client_street_wayType:"",client_street_name:"",client_street_codePostal:"",client_website:"",client_street_number_delivery:"",client_street_wayType_delivery:"",client_street_name_delivery:"",client_street_codePostal_delivery:""}),t=Object(pe.a)(e,2),n=t[0],a=t[1],i=Object(de.useState)(!1),c=Object(pe.a)(i,2),r=c[0],l=c[1],o=Object(de.useState)(""),s=Object(pe.a)(o,2),d=s[0],j=s[1],u=n.client_ape.replace(".",""),b=Ke("http://localhost:8000/api/naf_sous_classes/"+u),p=b.items,h=(b.loading,b.load),O=Object(de.useState)([]),x=Object(pe.a)(O,2),m=x[0],f=x[1],g=Ke("http://localhost:8000/api/villesByCp/"+n.client_street_codePostal),v=g.items,y=g.load,S=Object(de.useState)({value:"",valueDisplay:""}),_=Object(pe.a)(S,2),C=_[0],w=_[1],A=Object(de.useState)(!0),k=Object(pe.a)(A,2),T=k[0],P=k[1],D=Object(de.useState)([]),I=Object(pe.a)(D,2),E=I[0],F=I[1],V=Ke("http://localhost:8000/api/villesByCp/"+n.client_street_codePostal_delivery),N=V.items,R=V.load,B=Object(de.useState)({value:"",valueDisplay:""}),z=Object(pe.a)(B,2),q=z[0],M=z[1],U=Object(de.useState)(!0),J=Object(pe.a)(U,2),L=J[0],Y=J[1],G=Object(de.useState)({value:"",valueDisplay:""}),H=Object(pe.a)(G,2),W=H[0],X=H[1],K=Object(de.useState)(!0),Q=Object(pe.a)(K,2),Z=Q[0],$=Q[1],ee=Object(de.useState)(!0),te=Object(pe.a)(ee,2),ne=te[0],ae=te[1],ie=Object(de.useState)(!1),ce=Object(pe.a)(ie,2),re=ce[0],le=ce[1],oe=Object(de.useState)(!1),se=Object(pe.a)(oe,2),je=se[0],ue=se[1],be=Object(de.useState)({}),he=Object(pe.a)(be,2),Oe=he[0],xe=he[1],me=Object(de.useState)([]),ve=Object(pe.a)(me,2),Se=ve[0],_e=ve[1];Object(de.useEffect)((function(){Se&&xe(Se.find((function(e){return e.nom+" "+e.prenom===W.valueDisplay})))}),[Se]);Object(de.useEffect)((function(){j(p.libelle)}),[p]);Object(de.useEffect)((function(){f(v)}),[v]);Object(de.useEffect)((function(){F(N)}),[N]);var we=Object(de.useState)([]),Ae=Object(pe.a)(we,2),ke=Ae[0],Te=Ae[1],Pe=Ke("http://localhost:8000/api/type_historiques"),Ie=Pe.items,Ee=Pe.load,Fe=(Pe.loading,Object(de.useState)({value:"",valueDisplay:""})),Ne=Object(pe.a)(Fe,2),Be=Ne[0],ze=Ne[1];Object(de.useEffect)((function(){Ee()}),[Ee]),Object(de.useEffect)((function(){0===ke.length&&$(!0)}),[ke]);var qe=Ke("http://localhost:8000/api/type_potentialites"),Me=qe.items,Ue=(qe.loading,qe.load);Object(de.useEffect)((function(){Ue()}),[Ue]);var Je=Object(de.useState)({value:"",valueDisplay:""}),Le=Object(pe.a)(Je,2),Ye=Le[0],Ge=Le[1],He=Ke("http://localhost:8000/api/magazines"),Qe=He.items,Ze=He.load,$e=(He.loading,Object(de.useState)({value:"",valueDisplay:""})),et=Object(pe.a)($e,2),nt=et[0],at=et[1],it=Object(de.useState)(!0),ct=Object(pe.a)(it,2),rt=ct[0],lt=ct[1];Object(de.useEffect)((function(){"R\xe9gie"===Ye.valueDisplay?(lt(!1),Ze()):(lt(!0),at({value:"",valueDisplay:""}))}),[Ye,Ze]);var ot=Object(de.useState)([]),st=Object(pe.a)(ot,2),dt=st[0],jt=st[1],ut=function(e,t){var n=Object(de.useState)(!1),a=Object(pe.a)(n,2),i=a[0],c=a[1],r=Object(de.useState)(""),l=Object(pe.a)(r,2),o=l[0],s=l[1],d=Object(de.useState)(""),j=Object(pe.a)(d,2),u=j[0],b=j[1];return{success:o,error:u,post:Object(de.useCallback)(Object(Xe.a)(We.a.mark((function n(){var a,i;return We.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.next=3,fetch(e,{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(t)});case 3:return a=n.sent,n.next=6,a.json();case 6:i=n.sent,201===a.status?(console.log("ok"),s(i),c(!1)):(b(i),c(!0));case 8:case"end":return n.stop()}}),n)}))),[e,t]),loading:i}}("http://localhost:8000/api/clients",{raisonSociale:n.client_name,statut:"true"===je,email:n.client_mail,siteInternet:n.client_website,typeFacturation:"true"===ne,nafSousClasse:"/api/naf_sous_classes/"+u,contacts:ke}),bt=ut.success,pt=(ut.error,ut.post),ht=ut.loading;Object(de.useEffect)((function(){_e(bt.contacts)}),[bt]);var Ot=Object(de.useState)(!0),xt=Object(pe.a)(Ot,2),mt=xt[0],ft=xt[1];Object(de.useEffect)((function(){bt.id&&fetch("http://localhost:8000/api/adresses",{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({numero:n.client_street_number,typeVoie:n.client_street_wayType,nomVoie:n.client_street_name,ville:"/api/villes/"+C.value,client:"/api/clients/"+bt.id,statutAdresse:!0})}).then((function(e){201===e.status?(console.log("adresse ok"),ft(!1)):console.error(e)}))}),[bt]);var gt=Object(de.useState)(!0),vt=Object(pe.a)(gt,2),yt=(vt[0],vt[1]);Object(de.useEffect)((function(){!0===re&&bt.id&&fetch("http://localhost:8000/api/adresses",{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({numero:n.client_street_number_delivery,typeVoie:n.client_street_wayType_delivery,nomVoie:n.client_street_name_delivery,ville:"/api/villes/"+q.value,client:"/api/clients/"+bt.id,statutAdresse:!1})}).then((function(e){201===e.status?(console.log("adresse ok"),yt(!1)):console.error(e)}))}),[bt]);var St=Object(de.useState)(!0),_t=Object(pe.a)(St,2),Ct=(_t[0],_t[1]);Object(de.useEffect)((function(){"undefined"!=typeof Oe&&void 0!==n.commentaire&&fetch("http://localhost:8000/api/historique_clients",{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({commentaire:n.commentaire,user:"/api/users/"+JSON.parse(localStorage.getItem("meUser")).id,client:"/api/clients/"+bt.id,typeHistorique:"/api/type_historiques/"+Be.value,contact:"/api/contacts/"+Oe.id})}).then((function(e){201===e.status?(console.log("adresse ok"),Ct(!1)):console.error(e)}))}));var wt=Object(de.useState)(!0),At=Object(pe.a)(wt,2),kt=(At[0],At[1]);Object(de.useEffect)((function(){bt.id&&dt.length>0&&dt&&dt.map((function(e){""!==e.magazine.value?fetch("http://localhost:8000/api/potentialites",{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({typePotentialite:"/api/type_potentialites/"+e.type.value,magazine:"/api/magazines/"+e.magazine.value,client:"/api/clients/"+bt.id})}).then((function(e){201===e.status?console.log("potentialit\xe9s ok"):console.error(e)})):fetch("http://localhost:8000/api/potentialites",{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({typePotentialite:"/api/type_potentialites/"+e.type.value,client:"/api/clients/"+bt.id})}).then((function(e){201===e.status?(console.log("potentialit\xe9s ok"),kt(!1)):console.error(e)}))}))}),[bt]);var Tt=document.querySelectorAll(".inputSelect");return Object(de.useEffect)((function(){!1===ht&&!1===mt&&l(!0);for(var e=0;e<Tt.length;e++)Tt[e].selectedIndex=0}),[bt]),Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)(fe,{children:[Object(Ce.jsx)("h1",{children:"Cr\xe9er un client"}),Object(Ce.jsxs)("form",{onSubmit:function(e){e.preventDefault(),pt()},children:[Object(Ce.jsx)(De,{children:Object(Ce.jsx)(Ve,{label:"Statut du client",setTypeClientRadio:ue,selected:je,name:"client_statut",data:[{id:"id1",label:"Prospect",value:!1},{id:"id2",label:"Acquis",value:!0}]})}),Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["Nom du client",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_name,name:"client_name",required:!0})]}),Object(Ce.jsxs)("label",{children:["Code APE",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},onBlur:function(e){return function(e,t){e.preventDefault();var n=e.target.value.length;6===n&&setTimeout((function(){h()}),1e3),0===n&&t("")}(e,j)},value:n.client_ape,name:"client_ape",required:!0})]}),Object(Ce.jsxs)("label",{children:["Activit\xe9",Object(Ce.jsx)(Mt,{type:"text",value:d,onChange:function(e){return Gt(e,a)},name:"client_activite",readOnly:!0,disabled:!0})]})]}),Object(Ce.jsx)("h2",{children:"Coordonn\xe9es"}),Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["T\xe9l\xe9phone",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_phone,name:"client_phone"})]}),Object(Ce.jsxs)("label",{children:["Email de l'entreprise",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_mail,name:"client_mail"})]})]}),Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["Num\xe9ro",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_street_number,name:"client_street_number"})]}),Object(Ce.jsxs)("label",{children:["Type de voie",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_street_wayType,name:"client_street_wayType"})]}),Object(Ce.jsxs)("label",{children:["Rue",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_street_name,name:"client_street_name"})]})]}),Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["Code postal",Object(Ce.jsx)(Mt,{type:"number",onChange:function(e){return Gt(e,a)},onBlur:function(e){return function(e,t){e.preventDefault();var n=e.target.value.length;5===n&&setTimeout((function(){y(),P(!1)}),1e3),0===n&&(t(""),P(!0))}(e,f)},onWheel:function(e){return e.target.blur()},value:n.client_street_codePostal,name:"client_street_codePostal"})]}),Object(Ce.jsx)(Re,{name:"select_villes_client",label:"Villes",data:m&&m.map((function(e,t){return{id:t,value:e.id,valueDisplay:e.nom}})),option:"Villes",optionValue:"",selectValue:C,setSelectValue:w,disabled:T})]}),Object(Ce.jsxs)("label",{children:["Site internet",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_website,name:"client_website"})]}),Object(Ce.jsx)("h2",{children:"Adresse de livraison"}),Object(Ce.jsx)(De,{children:Object(Ce.jsx)(Ve,{label:"Diff\xe9rente de l'adresse de facturation",setTypeClientRadio:le,selected:re,name:"isHasAddressDelivery",data:[{id:"id1",label:"Non",value:!1},{id:"id2",label:"Oui",value:!0}]})}),"true"===re&&Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["Num\xe9ro",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_street_number_delivery,name:"client_street_number_delivery",required:!0})]}),Object(Ce.jsxs)("label",{children:["Type de voie",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_street_wayType_delivery,name:"client_street_wayType_delivery",required:!0})]}),Object(Ce.jsxs)("label",{children:["Rue",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return Gt(e,a)},value:n.client_street_name_delivery,name:"client_street_name_delivery",required:!0})]})]}),Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["Code postal",Object(Ce.jsx)(Mt,{type:"number",onChange:function(e){return Gt(e,a)},onBlur:function(e){return function(e,t){e.preventDefault();var n=e.target.value.length;5===n&&setTimeout((function(){R(),Y(!1)}),1e3),0===n&&(t(""),Y(!0))}(e,F)},onWheel:function(e){return e.target.blur()},value:n.client_street_codePostal_delivery,name:"client_street_codePostal_delivery",required:!0})]}),Object(Ce.jsx)(Re,{name:"select_villes_delivery",label:"Villes",data:E&&E.map((function(e,t){return{id:t,value:e.id,valueDisplay:e.nom}})),option:"Villes",optionValue:"",selectValue:q,setSelectValue:M,disabled:L})]})]}),Object(Ce.jsx)("h2",{children:"Choix de la facturation"}),Object(Ce.jsx)(Ve,{setTypeClientRadio:ae,selected:ne,name:"typeBill",data:[{id:"id1",label:"Mail",value:!0},{id:"id2",label:"Courrier",value:!1}]}),Object(Ce.jsx)("h2",{children:"Contact"}),Object(Ce.jsx)($t,{children:ke.map((function(e,t){return Object(Ce.jsx)(Lt,{numberContact:t,firstname:e.prenom,lastname:e.nom,job:e.fonction,phone:e.tel,mail:e.email,onChange:function(e){return function(e,t){ke[t].nom=e.nom,ke[t].prenom=e.prenom,ke[t].fonction=e.fonction,ke[t].tel=e.tel,ke[t].email=e.email,Te(ke)}(e,t)},removeContact:function(e){return function(e,t){e.preventDefault(),Te([].concat(Object(zt.a)(ke.slice(0,t)),Object(zt.a)(ke.slice(t+1))))}(e,t)}},Object.values(e).join("*=*")+t)}))}),Object(Ce.jsxs)(De,{align:"baseline",children:[Object(Ce.jsx)(tt,{text:"Ajouter un contact",add:function(e){e.preventDefault(),Te(ke.concat({nom:"",prenom:"",fonction:"",tel:"",email:""})),$(!0)}}),ke.length>0&&Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)("span",{children:"ou"}),Object(Ce.jsx)(ye,{margin:"0 0 0 15px",onClick:function(e){return function(e){e.preventDefault(),ke.forEach((function(e){var t=0;for(var n in e)e[n].length>2?5===++t&&$(!1):$(!0)}))}(e)},children:"Valider les contact"})]})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h2",{children:"Commentaire"}),Object(Ce.jsxs)(en,{children:[Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(Re,{name:"select_contact_historiques",label:"Contact",data:ke&&ke.map((function(e,t){return{id:t,value:t,valueDisplay:e.nom+" "+e.prenom}})),option:"Saisir le contact",optionValue:"",selectValue:W,setSelectValue:X,disabled:Z}),Object(Ce.jsx)(Re,{label:"Type de contact",data:Ie?Ie.map((function(e,t){return{id:t,value:e.id,valueDisplay:e.libelle}})):"",option:"Saisir le type de contact",optionValue:"",selectValue:Be,setSelectValue:ze,disabled:!1})]}),Object(Ce.jsx)("div",{children:Object(Ce.jsx)(Wt,{label:"Saisir votre comentaire:",commentaireRows:10,onChange:function(e){return Gt(e,a)},value:n.commentaire,name:"commentaire",required:!0})})]})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h2",{children:"Indice de potentialit\xe9"}),Object(Ce.jsxs)(De,{align:"center",children:[Object(Ce.jsx)(Re,{name:"select_potentialities_types",label:"Type de potentialit\xe9",data:Me&&Me.map((function(e,t){return{id:t,value:e.id,valueDisplay:e.libelle}})),option:"Saisir le type de contact",optionValue:"",selectValue:Ye,setSelectValue:Ge,disabled:!1}),Object(Ce.jsx)(Re,{name:"select_magazines",label:"Nom du magazine si type encard",data:Qe.map((function(e,t){return{id:t,value:e.id,valueDisplay:e.nom}})),option:"Saisir le type de contact",optionValue:"",selectValue:nt,setSelectValue:at,disabled:rt}),Object(Ce.jsx)(tt,{text:"Ajouter la potentialit\xe9",margin:"0 0 0 15px",add:function(e){e.preventDefault(),""!==Ye.value&&jt(dt.concat({type:{value:Ye.value,valueDisplay:Ye.valueDisplay},magazine:{value:nt.value,valueDisplay:nt.valueDisplay}}))}})]}),Object(Ce.jsx)(It,{headTable:["Type","Magazines",""],dataPotentiality:dt,removePotentiality:function(e,t){return function(e,t){e.preventDefault(),console.log(t),jt([].concat(Object(zt.a)(dt.slice(0,t)),Object(zt.a)(dt.slice(t+1))))}(e,t)}})]}),Object(Ce.jsx)(ge,{type:"submit",children:"Cr\xe9er le client"})]})]}),r&&Object(Ce.jsx)(Zt,{messageTitle:"Demande Valid\xe9e",messageText:"Votre profil a bien \xe9t\xe9 mis \xe0 jour",statut:"success"})]})},nn=n(31),an=me.a.h2(re||(re=Object(xe.a)(["\n      font-weight: 900;\n      font-size: 20px;\n      text-transform: uppercase;\n    "]))),cn=function(e){var t=e.titre;return Object(Ce.jsx)(an,{children:t})},rn=function(){var e=Object(de.useState)("print"),t=Object(pe.a)(e,2),n=t[0],a=t[1],i=Object(de.useState)(),c=Object(pe.a)(i,2),r=c[0],l=c[1],o=Object(de.useState)("communication"),s=Object(pe.a)(o,2),d=s[0],j=s[1];return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(fe,{children:[Object(Ce.jsx)("h1",{children:"Cr\xe9ation d'une nouvelle commande"}),Object(Ce.jsx)("form",{onSubmit:function(e){e.preventDefault();var t,n=new FormData(e.currentTarget),a=Object(nn.a)(n.entries());try{for(a.s();!(t=a.n()).done;){var i=Object(pe.a)(t.value,2),c=i[0],r=i[1];console.log(c,r)}}catch(l){a.e(l)}finally{a.f()}console.log("coucou")},children:Object(Ce.jsxs)("div",{className:"commande_print",children:[Object(Ce.jsx)(cn,{titre:"Type de commande"}),Object(Ce.jsx)(Ve,{selected:"false",name:"type_commande",data:[{id:"id1",label:"Nouvelle commande",value:"false"},{id:"id2",label:"Renouvellement",value:"true"}]}),Object(Ce.jsx)(cn,{titre:"Type de produit"}),Object(Ce.jsx)(Ve,{onchange:function(e){j(e.target.value)},selected:d,name:"type_produit",data:[{id:"id1",label:"Support de communication",value:"communication"},{id:"id2",label:"R\xe9gie",value:"regie"}]}),"communication"===d?Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(cn,{titre:"Client"}),Object(Ce.jsx)(Re,{label:"Choix du client",data:[{id:"id1",value:"Site internet"},{id:"id2",value:"Brochure"},{id:"id3",value:"Flyer"}]}),Object(Ce.jsx)(Re,{label:"Choix du contact",data:[{id:"id1",value:"Site internet"},{id:"id2",value:"Brochure"},{id:"id3",value:"Flyer"}]}),Object(Ce.jsx)(cn,{titre:"Support"}),Object(Ce.jsx)(Ve,{label:"Type de support",name:"type_support",onchange:function(e){a(e.target.value)},selected:n,data:[{id:"id1",label:"Produit imprim\xe9",value:"print"},{id:"id2",label:"Web",value:"web"},{id:"id3",label:"Contenu",value:"contenu"},{id:"id4",label:"R\xe9seaux sociaux",value:"social"},{id:"id5",label:"Magasine",value:"magasine"}]}),"print"===n&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(Ve,{name:"format",data:[{id:"id1",label:"Flyer",value:"flyer "},{id:"id2",label:"Autocollant",value:"autocollant"}]}),Object(Ce.jsx)(at,{label:"Nombre d'exemplaire",name:"number_items",type:"number"}),Object(Ce.jsx)(at,{type:"date",label:"Nombre d'exemplaire",name:"number_items"})]}),"web"===n&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(Ve,{label:"type de contrat",onchange:function(e){l(e.target.value)},name:"format",data:[{id:"id1",label:"Cr\xe9ation de site",value:"create "},{id:"id2",label:"Maintenance",value:"maintenance"},{id:"id3",label:"H\xe9bergement",value:"hebergement"}]}),"maintenance"===r&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(at,{label:"Adresse du site",name:"site_name"}),Object(Ce.jsx)(at,{type:"date",label:"Date de fin de maintenance",name:"maintenance_date"})]})]}),"contenu"===n&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(cn,{titre:"Type de contenu"}),Object(Ce.jsx)(Ve,{name:"format",data:[{id:"id1",label:"Web",value:"web"},{id:"id2",label:"Print",value:"print"}]})]}),"magasine"===n&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(cn,{titre:"Information du magasine"}),Object(Ce.jsx)(Re,{label:"Nom du magasine",data:[{id:"id1",value:"Site internet"},{id:"id2",value:"Brochure"},{id:"id3",value:"Flyer"}]}),Object(Ce.jsx)(at,{label:"Extension du magasine",name:"number_items"}),Object(Ce.jsx)(at,{type:"date",label:"Date de fin de commercialisation",name:"number_items"})]})]}):Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(cn,{titre:"MAGAZINE"}),Object(Ce.jsx)(Re,{label:"Choix de magazine",data:[{id:"id1",value:"Site internet"},{id:"id2",value:"Brochure"},{id:"id3",value:"Flyer"}]}),Object(Ce.jsx)(Re,{label:"Choix de l'\xe9dition",data:[{id:"id1",value:"Site internet"},{id:"id2",value:"Brochure"},{id:"id3",value:"Flyer"}]}),Object(Ce.jsx)(Re,{label:"Choix du contact",data:[{id:"id1",value:"Site internet"},{id:"id2",value:"Brochure"},{id:"id3",value:"Flyer"}]}),Object(Ce.jsx)(cn,{titre:"Choix de l'emplacement"}),Object(Ce.jsx)(Ve,{name:"format",data:[{id:"id1",label:"Web",value:"web"},{id:"id2",label:"Print",value:"print"}]}),Object(Ce.jsx)(cn,{titre:"Choix de l'encart"}),Object(Ce.jsx)(Ve,{name:"format",data:[{id:"id1",label:"Web",value:"web"},{id:"id2",label:"Print",value:"print"}]})]}),Object(Ce.jsx)(Wt,{label:"Commentaire",commentaireId:"com1",commentaireName:"comname",commentaireRows:"10",commentaireCols:"60"}),Object(Ce.jsx)(at,{label:"Montant de la facture",name:"bill"}),Object(Ce.jsx)(ge,{children:"Cr\xe9er la commande"})]})})]})})},ln=me.a.table(le||(le=Object(xe.a)(["\n      width: 100%;\n    "]))),on=function(){var e=Ke("http://localhost:8000/api/commandes"),t=e.items,n=e.loading,a=e.load;return Object(de.useEffect)((function(){a()}),[a]),n?Object(Ce.jsx)(ke,{}):Object(Ce.jsx)("div",{children:Object(Ce.jsxs)(ln,{children:[Object(Ce.jsx)("thead",{children:Object(Ce.jsx)("tr",{children:["Type","Client","Prix","Date de livraison","Status"].map((function(e,t){return Object(Ce.jsx)("th",{children:e},t)}))})}),Object(Ce.jsx)("tbody",{children:t.map((function(e,t){return Object(Ce.jsxs)("tr",{children:[Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:"A faire"})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:e.client.raisonSociale})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:e.facturation})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:e.fin})}),Object(Ce.jsx)("td",{children:Object(Ce.jsx)(he.b,{to:{pathname:"/commande/".concat(e.id)},children:e.statut.libelle})})]},t)}))})]})})},sn=function(){return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(fe,{children:[Object(Ce.jsx)(_e,{children:Object(Ce.jsx)(ve,{to:"/creation_commande",children:"Cr\xe9er une commande"})}),Object(Ce.jsx)("h1",{children:"Commandes page"}),Object(Ce.jsx)(on,{})]})})},dn=(n(50),function(){var e=Object(Oe.f)().id,t=Ke("http://127.0.0.1:8000/api/commandes/".concat(e)),n=t.items,a=t.load,i=t.loading;Object(de.useEffect)((function(){a()}),[a]),console.log(n);var c=n.client?n.client.adresses[0]:"",r=Ke("http://127.0.0.1:8000"+c),l=r.items,o=r.load;r.loading;Object(de.useEffect)((function(){o()}),[o]),console.log(l);var s=l.numero+" "+l.typeVoie+" "+l.nomVoie+" "+(l.ville?l.ville.nom+" "+l.ville.codePostal:""),d=new Date(n.fin),j=d.getDate()+"-"+(d.getMonth()+1)+"-"+d.getFullYear();return i?Object(Ce.jsx)("div",{children:"Chargement"}):Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(fe,{children:[Object(Ce.jsx)($e,{}),Object(Ce.jsx)(_e,{children:Object(Ce.jsx)(ve,{to:"/creation_client",children:"Nouvelle relance"})}),Object(Ce.jsxs)(gt,{children:[Object(Ce.jsxs)("h1",{children:[n.hasOwnProperty("supportMagazine")?"Magasine":n.hasOwnProperty("supportPrint")?"Print":n.hasOwnProperty("supportWeb")?"Site Web":n.hasOwnProperty("reseauSocial")?"Community Manager":void 0," / ",Object(Ce.jsx)("span",{children:n.client?n.client.raisonSociale:"loading"})]}),Object(Ce.jsxs)("p",{children:["Date de livraison: ",Object(Ce.jsx)("span",{children:j})]})]}),Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)(kt,{children:[Object(Ce.jsx)("h2",{children:"Informations li\xe9es \xe0 la commande"}),Object(Ce.jsxs)(wt,{children:[Object(Ce.jsx)(rt,{titre:"Type de produit",information:"items.telephone"}),Object(Ce.jsx)(rt,{titre:"Format",information:"A faire"}),Object(Ce.jsx)(rt,{titre:"Nombre de pages",information:"a faire"}),Object(Ce.jsx)(rt,{titre:"Nombre d'exemplaires",information:"a faire"}),Object(Ce.jsx)(rt,{titre:"Imprimeur",information:"a faire"})]}),Object(Ce.jsx)("h2",{children:"Clients"}),Object(Ce.jsxs)(wt,{children:[Object(Ce.jsx)(rt,{titre:"Nom",information:n.client?n.client.raisonSociale:"loading"}),Object(Ce.jsx)(rt,{titre:"Activit\xe9s",information:n.client?n.client.email:"loading"}),Object(Ce.jsx)(rt,{titre:"Email",information:n.client?n.client.email:"loading"}),Object(Ce.jsx)(rt,{titre:"T\xe9l\xe9phone",information:n.client?n.client.tel:"loading"}),Object(Ce.jsx)(rt,{titre:"Adresse",information:s})]}),Object(Ce.jsx)("h2",{children:"Prospects"}),Object(Ce.jsx)(wt,{children:Object(Ce.jsx)(rt,{titre:"Ville de propsection",tags:["37000","37100","37290"]})}),Object(Ce.jsx)("h2",{children:"Informations li\xe9s \xe0 la facturation"}),Object(Ce.jsx)(wt,{children:Object(Ce.jsx)(rt,{titre:"Montant de la facture",information:n.facturation+" \u20ac"})})]}),Object(Ce.jsxs)(Tt,{children:[Object(Ce.jsx)("h2",{children:"Contact du projet"}),Object(Ce.jsx)(st,{contact:n.contact&&n.contact.length>0?n.contact[0]:"loading"})]})]})]})})}),jn=me.a.div(oe||(oe=Object(xe.a)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),un=me.a.form(se||(se=Object(xe.a)(["\n  width: max-content;\n  margin: auto;\n"])));function bn(e){return pn.apply(this,arguments)}function pn(){return(pn=Object(Xe.a)(We.a.mark((function e(t){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:8000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hn,On,xn,mn,fn,gn,vn,yn,Sn=function(e){var t=e.setToken,n=(e.setCurrentUser,e.setLoading,Object(de.useState)(!1)),a=Object(pe.a)(n,2),i=(a[0],a[1]),c=Object(de.useState)(),r=Object(pe.a)(c,2),l=r[0],o=r[1],s=Object(de.useState)(),d=Object(pe.a)(s,2),j=d[0],u=d[1],b=function(){var e=Object(Xe.a)(We.a.mark((function e(n){var a;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,bn({username:l,password:j});case 3:a=e.sent,localStorage.setItem("token",a.token),localStorage.setItem("refreshToken",a.refreshToken),t(a.token),i(!0),fetch("http://localhost:8000/api/loggedin",{method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){e.ok&&e.json().then((function(e){var t=JSON.stringify({id:e.id,prenom:e.prenom,nom:e.nom,email:e.email,role:e.roles[0]});localStorage.setItem("meUser",t)}))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Ce.jsxs)(jn,{children:[Object(Ce.jsx)("h1",{style:{textAlign:"center"},children:"Bienvenue sur Projectil-Sogepress"}),Object(Ce.jsx)("p",{style:{textAlign:"center"},children:"Connecter vous pour acc\xe9der \xe0 votre compte"}),Object(Ce.jsxs)(un,{onSubmit:b,children:[Object(Ce.jsxs)("label",{children:["Identifiant",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return o(e.target.value)},value:l,name:"username"})]}),Object(Ce.jsxs)("label",{children:["Mot de passe",Object(Ce.jsx)(Mt,{type:"password",onChange:function(e){return u(e.target.value)},value:j,name:"password"})]}),Object(Ce.jsx)("button",{children:"Me connecter"})]})]})},_n=me.a.nav(hn||(hn=Object(xe.a)(["\n  display: flex;\n  position: fixed;\n  top: 0;\n  width: calc(100vw - 240px);\n  left: 200px;\n  padding: 20px;\n  background-color: #ffffff;\n  border-bottom: 1px solid #FF935B;\n  z-index: 9999;\n"]))),Cn=me.a.button(On||(On=Object(xe.a)(["\n  background-color: transparent;\n  border: none;\n  display: block;\n  margin-left: auto;\n  transition: .2s;\n\n  &:hover {\n    color: #d01c1c;\n  }\n"]))),wn=me.a.p(xn||(xn=Object(xe.a)(["\n  display: block;\n  \n  span{\n    font-weight: bold;\n  }\n"]))),An=function(){var e=JSON.parse(localStorage.getItem("meUser"));return Object(Ce.jsxs)(_n,{children:[Object(Ce.jsxs)(wn,{children:["Bonjour ",Object(Ce.jsx)("span",{children:e?e.nom+" "+e.prenom:""})]}),Object(Ce.jsx)(Cn,{onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/"},children:"D\xe9connexion"})]})},kn=me.a.nav(mn||(mn=Object(xe.a)(["\n      display: flex;\n      flex-direction: column;\n    "]))),Tn=Object(me.a)(he.c)(fn||(fn=Object(xe.a)(["\n  padding: 10px;\n  text-align: center;\n  text-decoration: none;\n  text-transform: uppercase;\n  font-weight: bold;\n  color: #fff;\n  \n  &:hover{\n    background-color: #fff;\n    color: #FF6700;\n  }\n  \n  &.active{\n    background-color: #fff;\n    color: #FF6700;\n  }\n"]))),Pn=function(){return Object(Ce.jsxs)(kn,{children:[Object(Ce.jsx)(Tn,{exact:!0,to:"/",children:"Accueil"}),Object(Ce.jsx)(Tn,{to:"/clients",children:"Clients"}),Object(Ce.jsx)(Tn,{to:"/commandes",children:"Commandes"}),Object(Ce.jsx)(Tn,{to:"/my_account",children:"Profil"})]})},Dn=me.a.nav(gn||(gn=Object(xe.a)(["\n  width: 200px;\n  height: 100vh;\n  background-color: #FF6700;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 9999;\n"]))),In=me.a.h1(vn||(vn=Object(xe.a)(["\n  font-size: 20px;\n  padding: 20px;\n"]))),En=function(){return Object(Ce.jsxs)(Dn,{children:[Object(Ce.jsx)(In,{children:"Projectil-Sogepress"}),Object(Ce.jsx)(Pn,{}),Object(Ce.jsx)(An,{})]})},Fn=me.a.div(yn||(yn=Object(xe.a)(["\n  margin-top: 50px;\n"]))),Vn=function(){var e=JSON.parse(localStorage.getItem("meUser")),t=function(e){return e||""};return Object(Ce.jsxs)(fe,{children:[Object(Ce.jsxs)(_e,{children:[Object(Ce.jsx)(ve,{to:"/creation_client",children:"Nouveau client"}),Object(Ce.jsx)(ve,{to:"/creation_commande",children:"Nouvelle commande"}),Object(Ce.jsx)(ve,{to:"#",children:"Nouvelle relance"})]}),Object(Ce.jsx)(gt,{children:Object(Ce.jsxs)("h1",{children:["Mon profil / ",function(e){switch(e){case"ROLE_ADMIN":return"Administrateur";case"ROLE_COMMERCIAL":return"Commercial";default:return"NC"}}(e.role)]})}),Object(Ce.jsx)(De,{children:Object(Ce.jsxs)(kt,{children:[Object(Ce.jsx)("h3",{children:"Mes informations"}),Object(Ce.jsxs)(wt,{children:[Object(Ce.jsx)(rt,{titre:"Nom",information:t(e.nom)}),Object(Ce.jsx)(rt,{titre:"Prenom",information:t(e.prenom)}),Object(Ce.jsx)(rt,{titre:"Email",information:t(e.email)})]})]})}),Object(Ce.jsxs)(Fn,{children:[Object(Ce.jsx)("h3",{children:"Mes actions"}),Object(Ce.jsx)(ye,{to:"/password_update",children:"Modifier mon mot de passe"}),Object(Ce.jsx)(ye,{to:"/account_update",children:"Modifier mon profil"})]})]})},Nn=function(){var e=JSON.parse(localStorage.getItem("meUser")),t=Object(de.useState)(!1),n=Object(pe.a)(t,2),a=n[0],i=n[1],c=Object(de.useState)(!1),r=Object(pe.a)(c,2),l=r[0],o=r[1],s=function(e,t){var n=e.target.value,a=e.target.name;t(Object(Yt.a)({},a,n))},d=Object(de.useReducer)((function(e,t){return Object(qt.a)(Object(qt.a)({},e),t)}),{lastname_user:e.nom,firstname_user:e.prenom,email_user:e.email}),j=Object(pe.a)(d,2),u=j[0],b=j[1];return l?Object(Ce.jsx)(fe,{children:Object(Ce.jsx)(ke,{})}):Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(fe,{children:[Object(Ce.jsx)(gt,{children:Object(Ce.jsx)("h1",{children:"Modifier mon profil"})}),Object(Ce.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({nom:u.lastname_user,prenom:u.firstname_user,email:u.email_user})};fetch("http://127.0.0.1:8000/api/users/"+e.id,n).then((function(e){o(!0),e.ok?(e.json().then((function(e){console.log(e);var t={nom:e.nom,prenom:e.prenom,email:e.email,role:e.roles[0],id:e.id};localStorage.setItem("meUser",JSON.stringify(t))})),setTimeout((function(){i(!0),o(!1)}),2e3)):e.status}))},children:[Object(Ce.jsxs)(De,{children:[Object(Ce.jsxs)("label",{children:["Nom",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return s(e,b)},value:u.lastname_user,name:"lastname_user"})]}),Object(Ce.jsxs)("label",{children:["Pr\xe9nom",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return s(e,b)},value:u.firstname_user,name:"firstname_user"})]})]}),Object(Ce.jsxs)("label",{children:["Email",Object(Ce.jsx)(Mt,{type:"text",onChange:function(e){return s(e,b)},value:u.email_user,name:"email_user"})]}),Object(Ce.jsx)(ge,{children:"Je modifie mon profil"})]}),a&&Object(Ce.jsx)(Zt,{messageTitle:"Demande Valid\xe9e",messageText:"Votre profil a bien \xe9t\xe9 mis \xe0 jour"})]})})},Rn=function(){var e=JSON.parse(localStorage.getItem("meUser")),t=Object(de.useState)(!1),n=Object(pe.a)(t,2),a=n[0],i=n[1],c=Object(de.useState)(!1),r=Object(pe.a)(c,2),l=r[0],o=r[1],s=Object(de.useReducer)((function(e,t){return Object(qt.a)(Object(qt.a)({},e),t)}),{new_password:"",confirm_new_password:""}),d=Object(pe.a)(s,2),j=d[0],u=d[1],b=function(e){var t=e.target.value,n=e.target.name;u(Object(Yt.a)({},n,t))};return l?Object(Ce.jsx)(fe,{children:Object(Ce.jsx)(ke,{})}):Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(fe,{children:[Object(Ce.jsx)(gt,{children:Object(Ce.jsx)("h1",{children:"Modifier mon mot de passe"})}),Object(Ce.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),j.new_password===j.confirm_new_password){var n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({plainPassword:j.new_password})};fetch("http://127.0.0.1:8000/api/users/"+e.id,n).then((function(e){e.ok&&setTimeout((function(){i(!0),o(!1)}),2e3)}))}else alert("Il y a une erreur dans a confirmation de votre mot de passe")},children:[Object(Ce.jsx)(at,{type:"password",label:"Nouveau mot de passe",name:"new_password",value:j.new_password,onChange:b,autocomplete:"new-password"}),Object(Ce.jsx)(at,{type:"password",label:"Confirmer votre nouveau mot de passe",name:"confirm_new_password",value:j.confirm_new_password,onChange:b,autocomplete:"new-password"}),Object(Ce.jsx)(ge,{children:"Je modifie mon mot de passe"})]}),a&&Object(Ce.jsx)(Zt,{messageTitle:"Demande Valid\xe9e",messageText:"Votre mot de passe \xe0 bien \xe9t\xe9 mis \xe0 jour"})]})})},Bn=function(){var e=Object(de.useState)(localStorage.getItem("token")),t=Object(pe.a)(e,2),n=t[0],a=t[1];return n?Object(Ce.jsxs)(he.a,{children:[Object(Ce.jsx)(En,{}),Object(Ce.jsxs)(Oe.c,{children:[Object(Ce.jsx)(Oe.a,{exact:!0,path:"/",children:Object(Ce.jsx)(we,{})}),Object(Ce.jsx)(Oe.a,{path:"/clients",children:Object(Ce.jsx)(Qe,{})}),Object(Ce.jsx)(Oe.a,{path:"/commandes",children:Object(Ce.jsx)(sn,{})}),Object(Ce.jsx)(Oe.a,{path:"/commande/:id",children:Object(Ce.jsx)(dn,{})}),Object(Ce.jsx)(Oe.a,{path:"/profile/:id",children:Object(Ce.jsx)(Bt,{})}),Object(Ce.jsx)(Oe.a,{path:"/creation_client",children:Object(Ce.jsx)(tn,{})}),Object(Ce.jsx)(Oe.a,{path:"/creation_commande",children:Object(Ce.jsx)(rn,{})}),Object(Ce.jsx)(Oe.a,{path:"/my_account",children:Object(Ce.jsx)(Vn,{})}),Object(Ce.jsx)(Oe.a,{path:"/account_update",children:Object(Ce.jsx)(Nn,{})}),Object(Ce.jsx)(Oe.a,{path:"/password_update",children:Object(Ce.jsx)(Rn,{})})]})]}):Object(Ce.jsx)(Sn,{setToken:a})};be.a.render(Object(Ce.jsx)(je.a.StrictMode,{children:Object(Ce.jsx)(Bn,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.fe0931f1.chunk.js.map